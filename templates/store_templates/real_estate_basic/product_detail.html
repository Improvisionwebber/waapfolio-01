{% extends "store_templates/real_estate_basic/base.html" %}
{% load static %}
{% load humanize %}
{% block body %}
<section class="py-5">
  <div class="row g-5 align-items-start">

    <!-- IMAGE -->
    <div class="col-lg-6">
{% if product.image %}
  <div class="card border-0 shadow-sm">
    <img src="{{ product.image.url }}"
         class="img-fluid rounded"
         style="object-fit:cover;">
  </div>
{% elif product.image_url %}
  <div class="card border-0 shadow-sm">
    <img src="{{ product.image_url }}"
         class="img-fluid rounded"
         style="object-fit:cover;">
  </div>
{% else %}
  <div class="card border-0 shadow-sm">
    <img src="{% static 'images/placeholder.png' %}"
         class="img-fluid rounded"
         style="object-fit:cover;">
  </div>
{% endif %}

    </div>

    <!-- DETAILS -->
    <div class="col-lg-6">
      <span class="hero-badge mb-3 d-inline-block">Property Details</span>

      <h2 class="fw-bold mb-2">
        {{ product.name }}
      </h2>

      <h4 class="text-primary fw-semibold mb-3">
        {% if product.currency == "NGN" %}₦{% elif product.currency == "USD" %}${% endif %}
        {{ product.price|intcomma }}
        </h4>

      <p class="text-muted mb-4">
        {{ product.description }}
      </p>

{% if product.store.order_system == 'whatsapp' %}
  <a href="https://wa.me/{{ product.store.whatsapp_number }}?text=Hi%2C%20I%20found%20you%20on%20Waapfolio%20and%20I%20want%20to%20order%20{{ product.name|urlencode }} for           {% if product.currency == "NGN" %}₦{% elif product.currency == "USD" %}${% elif product.currency == "EUR" %}€{% elif product.currency == "GBP" %}£{% elif product.currency == "GHS" %}₵{% endif %}  {{ product.price|intcomma }}" 
     class="order-btn whatsapp-btn">Order on WhatsApp</a>

{% elif product.store.order_system == 'facebook' %}
  {% if product.store.facebook_username %}
    <a href="https://m.me/{{ product.store.facebook_username }}?ref={{ product.name|urlencode }}" 
       class="order-btn facebook-btn">Order on Facebook</a>
  {% else %}
    <p class="text-muted">Facebook Messenger link not set.</p>
  {% endif %}

{% elif product.store.order_system == 'tiktok' %}
  <div class="d-flex flex-column gap-2">
    <a href="{{ product.store.tiktok_link }}" target="_blank" class="order-btn tiktok-btn">Order on TikTok</a>
    <input type="text" id="tiktokMessage" value="Hi, I found you on Waapfolio and I want to order {{ product.name }}" readonly class="form-control">
    <button onclick="copyMessage('tiktokMessage')" class="btn btn-secondary btn-sm mt-1">Copy Order Message</button>
  </div>

{% elif product.store.order_system == 'depop' %}
  <div class="d-flex flex-column gap-2">
    <a href="{{ product.store.depop_link }}" target="_blank" class="order-btn depop-btn">Order on Depop</a>
    <input type="text" id="depopMessage" value="Hi, I found you on Waapfolio and I want to order {{ product.name }}" readonly class="form-control">
    <button onclick="copyMessage('depopMessage')" class="btn btn-secondary btn-sm mt-1">Copy Order Message</button>
  </div>
{% endif %}
    </div>

  </div>
</section>
{% endblock %}
