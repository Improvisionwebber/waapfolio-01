{% extends "base.html" %}

{% block body %}
<!-- ✅ Sticky Header Search -->
<header class="sticky-top bg-white shadow-sm p-3" style="margin-top: 56px;">
  <div class="container">
    <form method="get" action="">
      <div class="input-group">
        <input 
          type="text" 
          name="q" 
          value="{{ query }}" 
          class="form-control rounded-start-pill" 
          placeholder="Search stores..."
        >
        <button class="btn btn-success rounded-end-pill" type="submit">Search</button>
      </div>
    </form>
  </div>
</header>

<!-- ✅ Results Section -->
<div class="container mt-4">
  <h5 class="mb-4 text-center">
    Search Results for "{{ query }}"
  </h5>

  {% if stores %}
    <div class="row g-3"> {# bootstrap gutter spacing #}
      {% for store in stores %}
        <div class="col-6 col-md-4 d-flex">
          <div class="card flex-fill h-100 shadow-sm">
            {% if store.brand_logo %}
              <img src="{{ store.brand_logo }}" 
                   class="card-img-top" 
                   alt="{{ store.brand_name }}">
            {% endif %}
            <div class="card-body d-flex flex-column">
              <h6 class="card-title text-truncate">{{ store.brand_name }}</h6>
              <p class="card-text small text-muted">{{ store.Bio|truncatewords:12 }}</p>
              <div class="mt-auto">
                <a href="{{ store.get_absolute_url }}" class="btn btn-success btn-sm w-100">Visit</a>
              </div>
            </div>
          </div>
        </div>
      {% endfor %}
    </div>
  {% else %}
    <p class="text-center text-muted">No stores found.</p>
  {% endif %}
</div>

<!-- ✅ Keep your custom styles -->
<style>
/* remove global padding since we fix with margin */
body {
  padding-top: 0;
  padding-bottom: 70px; /* keep bottom safe space */
}

.card {
  min-height: 100%;
}

.card-img-top {
  height: 150px;
  object-fit: contain;
  padding: 10px;
}
</style>
{% endblock body %}
